DROP TABLE users IF EXISTS;
DROP TABLE products IF EXISTS;
DROP TABLE orders IF EXISTS;



DROP SEQUENCE GLOBAL_SEQ IF EXISTS;

CREATE SEQUENCE GLOBAL_SEQ  AS INTEGER  START WITH 10;




CREATE TABLE users
(
  id       INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY,
  userName VARCHAR(255),
  roles     VARCHAR(255)

);





CREATE TABLE orders
(
  order_id INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY,
  startDate TIMESTAMP NOT NULL

);




CREATE TABLE products
(
  product_id   INTEGER GENERATED BY DEFAULT AS SEQUENCE GLOBAL_SEQ PRIMARY KEY,
  product_name VARCHAR(255),
  order_id   INTEGER ,
  FOREIGN KEY (order_id) REFERENCES ORDERS (order_id)  ON DELETE CASCADE
);
CREATE UNIQUE INDEX products_unique_order ON products (order_id);

