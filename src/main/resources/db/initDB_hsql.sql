DROP TABLE locals
IF EXISTS;
DROP TABLE currentstatus
IF EXISTS;
DROP TABLE products
IF EXISTS;
DROP TABLE orders
IF EXISTS;
DROP TABLE users
IF EXISTS;

DROP SEQUENCE LOCAL_SEQ
IF EXISTS;
DROP SEQUENCE ORDER_SEQ
IF EXISTS;
DROP SEQUENCE PRODUCT_SEQ
IF EXISTS;
DROP SEQUENCE STATUS_SEQ
IF EXISTS;
DROP SEQUENCE USER_SEQ
IF EXISTS;

CREATE SEQUENCE LOCAL_SEQ
  AS INTEGER
    START WITH 1;
CREATE SEQUENCE USER_SEQ
  AS INTEGER
    START WITH 1000;
CREATE SEQUENCE ORDER_SEQ
  AS INTEGER
    START WITH 1;
CREATE SEQUENCE PRODUCT_SEQ
  AS INTEGER
    START WITH 1;
CREATE SEQUENCE STATUS_SEQ
  AS INTEGER
    START WITH 1;


CREATE TABLE users
(
  id       INTEGER GENERATED BY DEFAULT AS SEQUENCE USER_SEQ PRIMARY KEY,
  userName VARCHAR(255),
  roles    VARCHAR(255),
  active   BOOLEAN DEFAULT TRUE
);




CREATE TABLE orders
(
  order_id      INTEGER GENERATED BY DEFAULT AS SEQUENCE ORDER_SEQ  PRIMARY KEY,
  active  BOOLEAN DEFAULT TRUE ,
  startDate DATE NOT NULL,
  customerName  VARCHAR(255),
  customerPhone  VARCHAR(255),
  orderComment  VARCHAR(255)

);




CREATE TABLE products
(
  product_id    INTEGER GENERATED BY DEFAULT AS SEQUENCE PRODUCT_SEQ  PRIMARY KEY,
  vendorCode  INTEGER,
  product_name  VARCHAR(255),
  countProducts   INTEGER,
  prepayment  INTEGER,
  deliveryProductDate DATE NOT NULL,
  order_id      INTEGER,
  FOREIGN KEY (order_id) REFERENCES ORDERS (order_id)
    ON DELETE CASCADE
);


CREATE TABLE currentstatus
(
  statusId    INTEGER GENERATED BY DEFAULT AS SEQUENCE STATUS_SEQ  PRIMARY KEY,
  statusName  VARCHAR(255),
  statusDate  DATE,
  product_id  INTEGER,

  id          INTEGER,
  FOREIGN KEY (product_id) REFERENCES products (product_id)
    ON DELETE CASCADE,
  FOREIGN KEY (id) REFERENCES users (id)
    ON DELETE CASCADE
);

CREATE TABLE locals
(

  id   INTEGER GENERATED BY DEFAULT AS SEQUENCE LOCAL_SEQ  PRIMARY KEY,
  localname VARCHAR(255)

);



